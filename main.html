<html>

  <head>
    <title>どうぶつしょうぎ</title>
    <script type="text/javascript" src="elm.js"></script>
  </head>

  <body>
    <h1>どうぶつしょうぎ</h1>
    <ul id="board"></ul>
    <div id="main" style="width:50%; height:400px;"></div>

    <ul id="board"></ul>
  </body>

  <script src="http://cdn.mlkcca.com/v0.2.8/milkcocoa.js"></script>
  <script src="milkcocoa_sample.js"></script>
  <script type="text/javascript">
    var mainDiv = document.getElementById('main');
    var initGs = {
    typ : "GameState"
  , board : []
  , turn : {typ: "Player", label: "P1"}
  , playState : {typ: "PlayState", label: "Neutral"}
  , result : {typ: "GameResult", label: "Unfinished", player: {typ: "Player", label: "P1"}}
  , clickedStateAt : null
  , clickedPosition : null
  , movablePositions : []
  , mochiGoma1 : []
  , mochiGoma2 : []
   }
    elmModule = Elm.embed(Elm.Main, mainDiv, {inGameState: initGs});
   /* elmModule.ports.arws.subscribe(hoge); */
    elmModule.ports.exGameState.subscribe(hoge);
   function hoge(a) {
   console.log(a);
   sendText(a);
   }

chatDataStore.on("push",function(data){
     console.log('push');
     console.log(data);
//     elmModule.ports.inSignal.send({x:3,y:4});
     elmModule.ports.inGameState.send(data.value.message);
     addText(data.value.message);
});
  </script>

</html>
